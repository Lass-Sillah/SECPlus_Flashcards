<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Sec+ Cards" />
  <meta name="theme-color" content="#131F24" />
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <title>Sec+ Cards â€” SY0-701</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body, #root { height: 100%; width: 100%; background: #131F24; overflow-x: hidden; }
    body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    /* Safe area padding for notched iPhones */
    #root { padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); }
  </style>
</head>
<body>
  <div id="root"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>

  <script type="text/babel" data-type="module">
    const { useState, useEffect, useCallback, useRef } = React;

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Compact card data loader â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    const SECTIONS_META = [
      { id:"fundamentals", title:"IT Security Fundamentals", icon:"ðŸ›¡ï¸", domain:"Domain 1: General Security Concepts", color:"#58CC02" },
      { id:"threats", title:"Threats & Attacks", icon:"âš ï¸", domain:"Domain 2: Threats & Mitigations", color:"#FF4B4B" },
      { id:"vulnerabilities", title:"Vulnerabilities", icon:"ðŸ”“", domain:"Domain 2: Threats & Mitigations", color:"#FF9600" },
      { id:"ransomware", title:"Ransomware & Malware", icon:"ðŸ’€", domain:"Domain 2: Threats & Mitigations", color:"#CE82FF" },
      { id:"onpath", title:"On-Path & Network Attacks", icon:"ðŸŒ", domain:"Domain 2: Threats & Mitigations", color:"#1CB0F6" },
      { id:"encryption", title:"Encryption & Cryptography", icon:"ðŸ”", domain:"Domain 3: Security Architecture", color:"#FF86D0" },
      { id:"socialeng", title:"Social Engineering", icon:"ðŸŽ­", domain:"Domain 2: Threats & Mitigations", color:"#FFC800" },
      { id:"securing", title:"Securing IT Assets", icon:"ðŸ°", domain:"Domain 3: Security Architecture", color:"#58CC02" },
      { id:"architecture", title:"Security Architecture", icon:"ðŸ—ï¸", domain:"Domain 3: Security Architecture", color:"#1CB0F6" },
      { id:"techniques", title:"Common Security Techniques", icon:"ðŸ”§", domain:"Domain 3: Security Architecture", color:"#FF9600" },
      { id:"vulnmgmt", title:"Vulnerability Management", icon:"ðŸ”", domain:"Domain 4: Security Operations", color:"#CE82FF" },
      { id:"monitoring", title:"Alerting, Monitoring & SIEM", icon:"ðŸ“Š", domain:"Domain 4: Security Operations", color:"#FF4B4B" },
      { id:"email", title:"Email & Endpoint Security", icon:"ðŸ“§", domain:"Domain 4: Security Operations", color:"#1CB0F6" },
      { id:"iam", title:"Identity & Access Management", icon:"ðŸªª", domain:"Domain 4: Security Operations", color:"#58CC02" },
      { id:"automation", title:"Automation & Orchestration", icon:"âš™ï¸", domain:"Domain 4: Security Operations", color:"#FFC800" },
      { id:"incident", title:"Incident Response", icon:"ðŸš¨", domain:"Domain 4: Security Operations", color:"#FF4B4B" },
      { id:"governance", title:"Governance & Compliance", icon:"ðŸ“‹", domain:"Domain 5: Program Management", color:"#CE82FF" },
      { id:"physical", title:"Physical Security", icon:"ðŸ¢", domain:"Domain 5: Program Management", color:"#FF9600" },
      { id:"resilience", title:"Resilience & Recovery", icon:"ðŸ”„", domain:"Domain 5: Program Management", color:"#1CB0F6" },
    ];

    const DOMAIN_COLORS = {
      "Domain 1: General Security Concepts": "#58CC02",
      "Domain 2: Threats & Mitigations": "#FF4B4B",
      "Domain 3: Security Architecture": "#1CB0F6",
      "Domain 4: Security Operations": "#CE82FF",
      "Domain 5: Program Management": "#FF9600",
    };

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Daily Streak Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    const getToday = () => new Date().toISOString().split("T")[0];
    const getYesterday = () => {
      const d = new Date();
      d.setDate(d.getDate() - 1);
      return d.toISOString().split("T")[0];
    };

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function SecurityPlusApp() {
      const [view, setView] = useState("home"); // home | section | study
      const [selectedSection, setSelectedSection] = useState(null);
      const [cardData, setCardData] = useState(null);
      const [loading, setLoading] = useState(true);
      const [progress, setProgress] = useState({});
      const [currentCard, setCurrentCard] = useState(0);
      const [flipped, setFlipped] = useState(false);
      const [mastered, setMastered] = useState({});
      const [searchQuery, setSearchQuery] = useState("");
      const [selectedDomain, setSelectedDomain] = useState(null);

      // Daily streak state
      const [dailyStreak, setDailyStreak] = useState(0);
      const [lastStudyDate, setLastStudyDate] = useState(null);
      const [todayCompleted, setTodayCompleted] = useState(false);
      const [sectionsCompletedToday, setSectionsCompletedToday] = useState(new Set());
      const [showCelebration, setShowCelebration] = useState(false);
      const [showStreakPopup, setShowStreakPopup] = useState(false);

      // Study mode options
      const [shuffled, setShuffled] = useState(false);
      const [unmasteredOnly, setUnmasteredOnly] = useState(false);
      const [cardOrder, setCardOrder] = useState([]);
      const studyStateRef = useRef({});

      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Sound FX (offline-safe; no audio files needed) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      const [soundEnabled, setSoundEnabled] = useState(() => {
        try { return JSON.parse(localStorage.getItem("secplus_soundEnabled") ?? "true"); }
        catch { return true; }
      });

      useEffect(() => {
        try { localStorage.setItem("secplus_soundEnabled", JSON.stringify(soundEnabled)); } catch {}
      }, [soundEnabled]);

      const audioCtxRef = useRef(null);

      const playSfx = useCallback((type) => {
        if (!soundEnabled) return;
        try {
          const AudioContext = window.AudioContext || window.webkitAudioContext;
          if (!AudioContext) return;

          if (!audioCtxRef.current) audioCtxRef.current = new AudioContext();
          const ctx = audioCtxRef.current;

          if (ctx.state === "suspended") ctx.resume().catch(() => {});

          const now = ctx.currentTime;
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();

          const map = {
            flip:   { f: 520, d: 0.06 },
            nav:    { f: 440, d: 0.05 },
            gotIt:  { f: 740, d: 0.08 },
            streak: { f: 880, d: 0.10 },
          };
          const { f, d } = map[type] || map.nav;

          osc.type = "sine";
          osc.frequency.setValueAtTime(f, now);

          gain.gain.setValueAtTime(0.0001, now);
          gain.gain.exponentialRampToValueAtTime(0.25, now + 0.01);
          gain.gain.exponentialRampToValueAtTime(0.0001, now + d);

          osc.connect(gain);
          gain.connect(ctx.destination);

          osc.start(now);
          osc.stop(now + d + 0.02);
        } catch {}
      }, [soundEnabled]);

      // Load streak data from persistent storage on mount
      useEffect(() => {
        const loadStreak = () => {
          try {
            const result = localStorage.getItem("streak-data");
            if (result) {
              const data = JSON.parse(result);
              const today = getToday();
              const yesterday = getYesterday();

              if (data.lastStudyDate === today) {
                setDailyStreak(data.streak);
                setLastStudyDate(data.lastStudyDate);
                setTodayCompleted(true);
                setSectionsCompletedToday(new Set(data.sectionsToday || []));
              } else if (data.lastStudyDate === yesterday) {
                setDailyStreak(data.streak);
                setLastStudyDate(data.lastStudyDate);
                setTodayCompleted(false);
                setSectionsCompletedToday(new Set());
              } else {
                setDailyStreak(0);
                setLastStudyDate(null);
                setTodayCompleted(false);
                setSectionsCompletedToday(new Set());
              }
            }
          } catch (e) {}
        };
        loadStreak();
      }, []);

      // Save streak data to persistent storage whenever it changes
      const saveStreak = useCallback((streak, lastDate, sectionsToday) => {
        try {
          localStorage.setItem("streak-data", JSON.stringify({
            streak,
            lastStudyDate: lastDate,
            sectionsToday: [...sectionsToday],
          }));
        } catch (e) {}
      }, []);

      const buildCardOrder = useCallback((sectionId, cards, doShuffle, doUnmastered, currentMastered) => {
        let indices = cards.map((_, i) => i);
        if (doUnmastered) {
          const remaining = indices.filter(i => !currentMastered[`${sectionId}-${i}`]);
          indices = remaining.length > 0 ? remaining : indices;
        }
        if (doShuffle) {
          for (let i = indices.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [indices[i], indices[j]] = [indices[j], indices[i]];
          }
        }
        return indices;
      }, []);

      // Persist mastered cards and progress
      useEffect(() => {
        const loadProgress = () => {
          try {
            const result = localStorage.getItem("mastered-cards");
            if (result) setMastered(JSON.parse(result));
            const progResult = localStorage.getItem("card-progress");
            if (progResult) setProgress(JSON.parse(progResult));
          } catch (e) {}
        };
        loadProgress();
      }, []);

      useEffect(() => {
        if (Object.keys(mastered).length > 0) {
          try { localStorage.setItem("mastered-cards", JSON.stringify(mastered)); } catch(e) {}
        }
      }, [mastered]);

      useEffect(() => {
        if (Object.keys(progress).length > 0) {
          try { localStorage.setItem("card-progress", JSON.stringify(progress)); } catch(e) {}
        }
      }, [progress]);

      // Load data on mount
      useEffect(() => {
        const generateCards = () => {
          const cards = {
            "fundamentals": [
              {t:"CIA Triad",c:"Confidentiality: Sensitive info accessed only by authorized persons.\nIntegrity: Assuring accuracy and reliability of info/systems.\nAvailability: Data and resources available to authorized users when needed."},
              {t:"Confidentiality",c:"Measures to ensure sensitive info is not disclosed to unauthorized entities.\nâ€¢ Access Controls (passwords, biometrics)\nâ€¢ Encryption\nâ€¢ Secure Communication (SSL/TLS)\nâ€¢ Data Classification"},
              {t:"Integrity",c:"Protecting data from unauthorized changes to ensure reliability.\nâ€¢ Checksums & Hash Functions\nâ€¢ Digital Signatures\nâ€¢ Access Controls\nâ€¢ Version Control"},
              {t:"Availability",c:"Ensuring data/systems accessible when needed.\nâ€¢ Redundancy\nâ€¢ Fault Tolerance\nâ€¢ Backup Systems\nâ€¢ Disaster Recovery Plans\nâ€¢ Prevents DDoS impact"},
              {t:"DAD Triad",c:"Opposite of CIA Triad:\nâ€¢ Disclosure â€” breach of confidentiality\nâ€¢ Alteration â€” loss of integrity\nâ€¢ Destruction â€” attack on availability"},
              {t:"Non-repudiation",c:"Ensures a party cannot deny the authenticity of their signature or message.\nImplemented using digital signatures with cryptographic techniques."},
              {t:"AAA Framework",c:"Authentication: Verifying identity of user/device.\nAuthorization: Determining what user is permitted to do.\nAccounting (Auditing): Tracking user activities and resource usage."},
              {t:"Authentication Factors",c:"Something you know: password, PIN\nSomething you have: token, smart card\nSomething you are: biometrics\nSomewhere you are: geolocation\nSomething you do: behavioral biometrics"},
              {t:"MFA",c:"Multi-Factor Authentication requires 2+ independent credential categories.\nCombines: knowledge + possession + inherence.\nStronger than any single factor alone."},
              {t:"Authorization",c:"Determines what authenticated users can do.\nâ€¢ Permissions & Privileges (read, write, execute)\nâ€¢ Access Control Lists (ACLs)\nâ€¢ Models: MAC, DAC, RBAC"},
              {t:"Accounting",c:"Tracking user activities and resource usage.\nâ€¢ User Activity Tracking\nâ€¢ Audit Trails and Logs\nâ€¢ Session monitoring\nâ€¢ Ensures accountability"},
              {t:"Gap Analysis",c:"Comparing current security posture with standards/requirements.\n1. Identify Current State\n2. Determine Target State\n3. Analyze the Gap\n4. Plan remediation"},
              {t:"Zero Trust",c:"Never automatically trust anything inside or outside perimeter.\nâ€¢ Strict Identity Verification\nâ€¢ Least Privilege Access\nâ€¢ MFA everywhere\nâ€¢ Monitor and Log All Traffic"},
              {t:"Zero Trust Architecture",c:"Data Plane: Policy Enforcement Point, Implicit Trust Zones\nControl Plane: Adaptive Identity, Policy-driven Access Control, Policy Engine, Policy Administrator\nThreat Scope Reduction"},
              {t:"Security Controls Categories",c:"Technical (logical): firewalls, IDS/IPS, encryption\nManagerial (administrative): policies, risk management\nOperational: day-to-day procedures, training\nPhysical: lighting, fences, cameras, guards"},
              {t:"Security Controls Types",c:"Preventive: stop incidents (IPS, firewalls)\nDetective: detect incidents (IDS, SIEM)\nCorrective: remediate (backups, IR)\nDeterrent: discourage (cameras, guards)\nDirective: policies, procedures\nCompensating: alternate controls"},
            ],
            "threats": [
              {t:"Threat Actors",c:"Nation-state: government-sponsored, APTs\nOrganized Crime: financial motivation\nHacktivists: political/social agenda\nInsider Threats: employees with access\nScript Kiddies: low skill, use existing tools"},
              {t:"Attack Vectors",c:"Methods attackers use to gain access:\nâ€¢ Phishing/social engineering\nâ€¢ Unpatched vulnerabilities\nâ€¢ Misconfigured systems\nâ€¢ Supply chain compromise\nâ€¢ Removable media"},
              {t:"Indicators of Compromise (IoC)",c:"Evidence that a system has been breached:\nâ€¢ Unusual outbound traffic\nâ€¢ Anomalous privileged user activity\nâ€¢ Geographic login irregularities\nâ€¢ Unexpected software/processes\nâ€¢ Log anomalies"},
              {t:"Malware Types",c:"Virus: self-replicating, attaches to files\nWorm: self-propagating across networks\nTrojan: disguised as legitimate software\nSpyware: monitors user activity\nAdware: displays unwanted ads\nRootkit: hides in OS kernel"},
              {t:"Advanced Persistent Threat (APT)",c:"Sophisticated, long-term targeted attack.\nâ€¢ Usually nation-state sponsored\nâ€¢ Maintains presence for months/years\nâ€¢ Goals: espionage, data theft\nâ€¢ Uses multiple attack vectors"},
              {t:"Supply Chain Attack",c:"Compromising a trusted vendor/supplier to infiltrate target.\nâ€¢ Software supply chain (SolarWinds)\nâ€¢ Hardware tampering\nâ€¢ Third-party service compromise\nâ€¢ Difficult to detect"},
              {t:"Denial of Service (DoS/DDoS)",c:"Overwhelming a system to make it unavailable.\nDoS: single source\nDDoS: distributed, multiple sources (botnets)\nTypes: volumetric, protocol, application layer"},
              {t:"Insider Threat",c:"Threat from people within the organization.\nâ€¢ Malicious: intentional harm\nâ€¢ Negligent: careless mistakes\nâ€¢ Compromised: credentials stolen\nMitigate: least privilege, monitoring, training"},
              {t:"Brute Force Attack",c:"Systematically trying all possible passwords/keys.\nâ€¢ Dictionary attack: common words\nâ€¢ Rainbow table: pre-computed hashes\nâ€¢ Credential stuffing: stolen creds\nMitigate: lockout policies, MFA, complexity"},
              {t:"Password Attacks",c:"â€¢ Brute Force: try all combinations\nâ€¢ Dictionary: common words list\nâ€¢ Rainbow Table: pre-computed hashes\nâ€¢ Password Spraying: common passwords across many accounts\nâ€¢ Credential Stuffing: reused stolen credentials"},
            ],
            "vulnerabilities": [
              {t:"Vulnerability Types",c:"Software: coding flaws, buffer overflows\nConfiguration: default settings, open ports\nHardware: firmware flaws, physical access\nHuman: social engineering susceptibility\nZero-day: unknown to vendor"},
              {t:"Common Vulnerabilities",c:"â€¢ SQL Injection\nâ€¢ Cross-Site Scripting (XSS)\nâ€¢ Buffer Overflow\nâ€¢ Race Condition\nâ€¢ Improper Input Validation\nâ€¢ Default Credentials"},
              {t:"SQL Injection",c:"Inserting malicious SQL into input fields to manipulate databases.\nâ€¢ Can read, modify, delete data\nâ€¢ Bypass authentication\nMitigate: parameterized queries, input validation, WAF"},
              {t:"Cross-Site Scripting (XSS)",c:"Injecting malicious scripts into web pages viewed by others.\nStored XSS: persisted on server\nReflected XSS: in URL/request\nDOM-based: client-side manipulation\nMitigate: input sanitization, CSP"},
              {t:"Buffer Overflow",c:"Writing data beyond allocated memory buffer.\nâ€¢ Can execute arbitrary code\nâ€¢ Crash applications\nMitigate: input validation, ASLR, DEP, secure coding"},
              {t:"OWASP Top 10",c:"Top web application security risks:\n1. Broken Access Control\n2. Cryptographic Failures\n3. Injection\n4. Insecure Design\n5. Security Misconfiguration\n6. Vulnerable Components\n7. Auth Failures\n8. Data Integrity Failures\n9. Logging Failures\n10. SSRF"},
              {t:"Race Condition",c:"When system behavior depends on timing of uncontrolled events.\nâ€¢ TOCTOU (Time of Check/Time of Use)\nâ€¢ Can bypass security checks\nMitigate: locks, mutexes, proper synchronization"},
              {t:"Privilege Escalation",c:"Gaining higher access than authorized.\nVertical: user â†’ admin\nHorizontal: user A â†’ user B\nMitigate: least privilege, patching, monitoring"},
              {t:"Directory Traversal",c:"Accessing files outside intended directory using ../ sequences.\nâ€¢ Can read sensitive system files\nâ€¢ /etc/passwd exposure\nMitigate: input validation, chroot, WAF"},
              {t:"CSRF (Cross-Site Request Forgery)",c:"Tricking authenticated user into submitting malicious request.\nâ€¢ Leverages existing session\nâ€¢ User unknowingly performs actions\nMitigate: anti-CSRF tokens, SameSite cookies"},
            ],
            "ransomware": [
              {t:"Ransomware",c:"Malware that encrypts victim's files and demands payment.\nâ€¢ Crypto ransomware: encrypts files\nâ€¢ Locker ransomware: locks system\nâ€¢ Double extortion: encrypt + threaten to leak\nâ€¢ Spreads via phishing, RDP, vulnerabilities"},
              {t:"Ransomware Prevention",c:"â€¢ Regular backups (3-2-1 rule)\nâ€¢ Patch management\nâ€¢ Email filtering\nâ€¢ User awareness training\nâ€¢ Network segmentation\nâ€¢ Endpoint detection (EDR)"},
              {t:"Trojans",c:"Malware disguised as legitimate software.\nâ€¢ Remote Access Trojan (RAT)\nâ€¢ Banking Trojan\nâ€¢ Downloader Trojan\nâ€¢ Users unknowingly install\nMitigate: antivirus, user training, app whitelisting"},
              {t:"Rootkits",c:"Malware that hides deep in OS to maintain persistent access.\nâ€¢ Kernel-level rootkits\nâ€¢ Boot-level rootkits\nâ€¢ Extremely difficult to detect\nMitigate: secure boot, integrity monitoring, reinstall OS"},
              {t:"Keyloggers",c:"Record keystrokes to capture passwords/sensitive data.\nâ€¢ Software or hardware based\nâ€¢ Can capture credentials, credit cards\nMitigate: antimalware, virtual keyboards, MFA"},
              {t:"Fileless Malware",c:"Operates entirely in memory without writing to disk.\nâ€¢ Uses legitimate tools (PowerShell, WMI)\nâ€¢ Evades traditional antivirus\nâ€¢ Living-off-the-land techniques\nMitigate: behavior-based detection, EDR"},
              {t:"Spyware & Adware",c:"Spyware: secretly monitors user activity, collects data\nAdware: displays unwanted advertisements\nBoth can slow systems and compromise privacy.\nMitigate: antimalware, careful downloads"},
              {t:"Logic Bomb",c:"Malicious code triggered by specific condition (date, event).\nâ€¢ Often planted by insiders\nâ€¢ Dormant until triggered\nMitigate: code review, access controls, monitoring"},
              {t:"Worms",c:"Self-replicating malware that spreads without user interaction.\nâ€¢ Exploits network vulnerabilities\nâ€¢ Can consume bandwidth, crash systems\nâ€¢ WannaCry, Conficker examples\nMitigate: patching, network segmentation, IDS"},
            ],
            "onpath": [
              {t:"On-Path Attack (MITM)",c:"Attacker intercepts communication between two parties.\nâ€¢ Can eavesdrop, modify, inject data\nâ€¢ SSL stripping\nâ€¢ ARP spoofing\nMitigate: encryption, certificate pinning, HSTS"},
              {t:"ARP Spoofing",c:"Sending fake ARP messages to link attacker's MAC to legitimate IP.\nâ€¢ Enables on-path attacks on LAN\nâ€¢ Can intercept, modify traffic\nMitigate: static ARP entries, DAI, network monitoring"},
              {t:"DNS Poisoning",c:"Corrupting DNS cache to redirect traffic to malicious sites.\nâ€¢ Pharming attack\nâ€¢ Can affect entire networks\nMitigate: DNSSEC, secure DNS servers, cache clearing"},
              {t:"Replay Attack",c:"Capturing and retransmitting valid data to gain unauthorized access.\nâ€¢ Session token replay\nâ€¢ Authentication replay\nMitigate: timestamps, nonces, session expiration"},
              {t:"SSL Stripping",c:"Downgrading HTTPS to HTTP to intercept traffic.\nâ€¢ User thinks connection is secure\nâ€¢ Attacker sees plaintext\nMitigate: HSTS, certificate pinning, user awareness"},
              {t:"Session Hijacking",c:"Taking over an active session by stealing session token.\nâ€¢ Cookie theft\nâ€¢ Session fixation\nâ€¢ Sidejacking\nMitigate: secure cookies, session timeout, encryption"},
            ],
            "encryption": [
              {t:"Symmetric Encryption",c:"Same key for encryption and decryption.\nâ€¢ Fast, efficient for large data\nâ€¢ Key distribution challenge\nâ€¢ AES, DES, 3DES, Blowfish, RC4"},
              {t:"Asymmetric Encryption",c:"Public key encrypts, private key decrypts (or vice versa).\nâ€¢ Solves key distribution problem\nâ€¢ Slower than symmetric\nâ€¢ RSA, ECC, Diffie-Hellman, DSA"},
              {t:"AES",c:"Advanced Encryption Standard.\nâ€¢ Symmetric block cipher\nâ€¢ Key sizes: 128, 192, 256 bits\nâ€¢ Block size: 128 bits\nâ€¢ Current gold standard for encryption"},
              {t:"RSA",c:"Rivest-Shamir-Adleman asymmetric algorithm.\nâ€¢ Based on factoring large primes\nâ€¢ Used for encryption & digital signatures\nâ€¢ Key sizes: 2048+ bits recommended\nâ€¢ Slower than symmetric methods"},
              {t:"Hashing",c:"One-way function producing fixed-size output from any input.\nâ€¢ Cannot be reversed\nâ€¢ Used for integrity verification\nâ€¢ MD5 (broken), SHA-1 (deprecated), SHA-256, SHA-3"},
              {t:"Digital Signatures",c:"Uses asymmetric crypto to verify authenticity & integrity.\nâ€¢ Sign with private key\nâ€¢ Verify with public key\nâ€¢ Provides non-repudiation\nâ€¢ Used in certificates, code signing"},
              {t:"PKI (Public Key Infrastructure)",c:"Framework for managing digital certificates and keys.\nâ€¢ Certificate Authority (CA)\nâ€¢ Registration Authority (RA)\nâ€¢ Certificate Revocation List (CRL)\nâ€¢ OCSP for real-time validation"},
              {t:"Certificate Types",c:"DV: Domain Validation (basic)\nOV: Organization Validation\nEV: Extended Validation (highest trust)\nWildcard: covers subdomains (*.domain.com)\nSAN: Subject Alternative Name (multiple domains)"},
              {t:"Key Exchange",c:"Diffie-Hellman: creates shared secret over insecure channel\nECDHE: elliptic curve variant, forward secrecy\nRSA key exchange: encrypts session key\nPerfect Forward Secrecy: new keys per session"},
              {t:"Blockchain",c:"Distributed, immutable ledger using cryptographic hashing.\nâ€¢ Each block links to previous via hash\nâ€¢ Decentralized consensus\nâ€¢ Tamper-evident\nâ€¢ Used in cryptocurrency, supply chain"},
              {t:"Steganography",c:"Hiding data within other data (images, audio, video).\nâ€¢ Data hidden in plain sight\nâ€¢ Different from encryption (concealment vs scrambling)\nâ€¢ Can combine with encryption for added security"},
              {t:"Tokenization",c:"Replacing sensitive data with non-sensitive placeholder tokens.\nâ€¢ Original data stored securely in token vault\nâ€¢ Used for credit card numbers, PII\nâ€¢ Reduces scope of compliance (PCI DSS)"},
            ],
            "socialeng": [
              {t:"Social Engineering",c:"Manipulating people to divulge information or perform actions.\nâ€¢ Exploits human psychology\nâ€¢ Often first step in larger attacks\nâ€¢ Most effective attack vector"},
              {t:"Phishing",c:"Fraudulent emails/messages to steal credentials or install malware.\nâ€¢ Spear phishing: targeted individual\nâ€¢ Whaling: targeting executives\nâ€¢ Vishing: voice phishing\nâ€¢ Smishing: SMS phishing"},
              {t:"Pretexting",c:"Creating fabricated scenario to engage victim.\nâ€¢ Impersonating authority figure\nâ€¢ Building trust over time\nâ€¢ Often combined with other techniques"},
              {t:"Baiting",c:"Offering something enticing to lure victim.\nâ€¢ Infected USB drives left in parking lots\nâ€¢ Free download offers\nâ€¢ Curiosity exploitation"},
              {t:"Tailgating / Piggybacking",c:"Following authorized person through secure entry.\nTailgating: without their knowledge\nPiggybacking: with their consent\nMitigate: mantraps, security awareness, badge policies"},
              {t:"Watering Hole Attack",c:"Compromising websites frequently visited by target group.\nâ€¢ Infects legitimate sites\nâ€¢ Targets specific organizations/industries\nâ€¢ Difficult to detect"},
              {t:"Typosquatting",c:"Registering misspelled domains to catch user typos.\nâ€¢ gooogle.com instead of google.com\nâ€¢ Can serve phishing pages or malware\nâ€¢ Also called URL hijacking"},
              {t:"Shoulder Surfing",c:"Observing someone's screen or keyboard to steal info.\nâ€¢ Can be done in person or with cameras\nMitigate: privacy screens, awareness, positioning"},
              {t:"Dumpster Diving",c:"Searching through trash for sensitive information.\nâ€¢ Discarded documents, drives, media\nMitigate: shredding, secure disposal, clean desk policy"},
              {t:"Influence Campaigns",c:"Coordinated efforts to manipulate public opinion.\nâ€¢ Disinformation: intentionally false\nâ€¢ Misinformation: unintentionally false\nâ€¢ Hybrid warfare component"},
            ],
            "securing": [
              {t:"Hardening",c:"Reducing attack surface by removing unnecessary services.\nâ€¢ Disable unused ports/services\nâ€¢ Remove default accounts\nâ€¢ Apply security baselines\nâ€¢ CIS Benchmarks, DISA STIGs"},
              {t:"Patch Management",c:"Systematic process of applying updates.\nâ€¢ Test before deploying\nâ€¢ Prioritize critical/security patches\nâ€¢ Regular schedule\nâ€¢ Emergency patches for zero-days"},
              {t:"Network Segmentation",c:"Dividing network into isolated segments.\nâ€¢ Limits lateral movement\nâ€¢ Contains breaches\nâ€¢ VLANs, subnets, firewalls\nâ€¢ Microsegmentation for granular control"},
              {t:"Endpoint Protection",c:"Securing individual devices.\nâ€¢ Antivirus/Antimalware\nâ€¢ EDR (Endpoint Detection & Response)\nâ€¢ Host-based firewall\nâ€¢ Full disk encryption\nâ€¢ Application whitelisting"},
              {t:"Wireless Security",c:"WPA3: current standard\nWPA2: still common, AES-CCMP\nWEP: deprecated, easily cracked\nâ€¢ Use enterprise mode (802.1X)\nâ€¢ Disable WPS\nâ€¢ MAC filtering (limited value)"},
              {t:"VPN",c:"Virtual Private Network creates encrypted tunnel.\nâ€¢ Site-to-site: connects networks\nâ€¢ Remote access: individual users\nâ€¢ IPSec or SSL/TLS based\nâ€¢ Split vs full tunnel"},
              {t:"IDS vs IPS",c:"IDS: Intrusion Detection System â€” monitors and alerts\nIPS: Intrusion Prevention System â€” monitors and blocks\nâ€¢ Signature-based: known patterns\nâ€¢ Anomaly-based: deviation from baseline\nâ€¢ Network (NIDS/NIPS) or Host (HIDS/HIPS)"},
              {t:"Firewalls",c:"Filter traffic based on rules.\nâ€¢ Stateless: individual packets\nâ€¢ Stateful: tracks connections\nâ€¢ Next-Gen (NGFW): app awareness, IPS, DPI\nâ€¢ WAF: protects web applications\nâ€¢ Rules: allow/deny based on IP, port, protocol"},
              {t:"DMZ (Demilitarized Zone)",c:"Network segment between internal and external networks.\nâ€¢ Hosts public-facing services\nâ€¢ Adds layer of security\nâ€¢ Protected by firewalls on both sides"},
              {t:"NAC (Network Access Control)",c:"Controls which devices can access the network.\nâ€¢ Pre-admission: check before access\nâ€¢ Post-admission: monitor after access\nâ€¢ Agent-based or agentless\nâ€¢ 802.1X integration"},
            ],
            "architecture": [
              {t:"Cloud Service Models",c:"IaaS: Infrastructure (VMs, storage, networking)\nPaaS: Platform (development environment)\nSaaS: Software (applications)\nResponsibility varies by model â€” shared responsibility model"},
              {t:"Cloud Deployment Models",c:"Public: shared infrastructure (AWS, Azure)\nPrivate: dedicated to one organization\nHybrid: combination of public + private\nCommunity: shared by related organizations"},
              {t:"Containerization",c:"Lightweight virtualization using shared OS kernel.\nâ€¢ Docker, Kubernetes\nâ€¢ Faster than VMs\nâ€¢ Isolated but share kernel\nâ€¢ Container security: image scanning, runtime protection"},
              {t:"Serverless",c:"Cloud provider manages infrastructure entirely.\nâ€¢ Function as a Service (FaaS)\nâ€¢ Pay per execution\nâ€¢ Auto-scaling\nâ€¢ Security: provider manages OS/runtime"},
              {t:"IoT Security",c:"Internet of Things challenges:\nâ€¢ Default credentials\nâ€¢ Limited processing for security\nâ€¢ Unpatched firmware\nâ€¢ Large attack surface\nMitigate: network segmentation, firmware updates, strong auth"},
              {t:"Virtualization",c:"Running multiple OS on single hardware.\nâ€¢ Type 1 (bare metal): ESXi, Hyper-V\nâ€¢ Type 2 (hosted): VirtualBox, VMware Workstation\nâ€¢ VM escape: breaking out of VM\nâ€¢ VM sprawl: uncontrolled proliferation"},
              {t:"Infrastructure as Code (IaC)",c:"Managing infrastructure through code/templates.\nâ€¢ Terraform, CloudFormation, ARM\nâ€¢ Version controlled\nâ€¢ Consistent deployments\nâ€¢ Security: scan templates for misconfigs"},
              {t:"Microservices",c:"Architecture splitting apps into small, independent services.\nâ€¢ Each service has specific function\nâ€¢ API communication\nâ€¢ Easier to scale and update\nâ€¢ Security: API gateway, service mesh"},
              {t:"Data Protection",c:"Data states:\nâ€¢ At rest: encryption (AES, BitLocker)\nâ€¢ In transit: TLS/SSL, VPN\nâ€¢ In use: memory encryption\nâ€¢ Data Loss Prevention (DLP) monitors all states"},
              {t:"Data Classification",c:"Public: no restrictions\nInternal: limited distribution\nConfidential: sensitive business data\nRestricted/Top Secret: highest sensitivity\nDetermines handling, storage, and access requirements"},
            ],
            "techniques": [
              {t:"Defense in Depth",c:"Multiple layers of security controls.\nâ€¢ Physical â†’ Network â†’ Host â†’ Application â†’ Data\nâ€¢ No single point of failure\nâ€¢ If one layer fails, others protect"},
              {t:"Least Privilege",c:"Users get minimum access needed for their role.\nâ€¢ Reduces attack surface\nâ€¢ Limits damage from compromise\nâ€¢ Regular access reviews\nâ€¢ Just-in-time access"},
              {t:"Separation of Duties",c:"No single person controls an entire critical process.\nâ€¢ Prevents fraud and errors\nâ€¢ Requires collusion to bypass\nâ€¢ Common in financial controls"},
              {t:"Change Management",c:"Formal process for making system changes.\nâ€¢ Request â†’ Review â†’ Approve â†’ Test â†’ Implement â†’ Document\nâ€¢ Reduces unauthorized changes\nâ€¢ CAB (Change Advisory Board)"},
              {t:"Incident Response Plan",c:"Documented procedures for handling security incidents.\nâ€¢ Preparation\nâ€¢ Identification\nâ€¢ Containment\nâ€¢ Eradication\nâ€¢ Recovery\nâ€¢ Lessons Learned"},
              {t:"Business Continuity",c:"Maintaining operations during/after disruption.\nâ€¢ BIA: Business Impact Analysis\nâ€¢ RPO: Recovery Point Objective\nâ€¢ RTO: Recovery Time Objective\nâ€¢ BCP testing and updates"},
              {t:"Honeypots & Honeynets",c:"Decoy systems to attract and study attackers.\nHoneypot: single decoy system\nHoneynet: network of honeypots\nHoneyfile/Honeytoken: fake data to detect access\nPurpose: early detection, threat intelligence"},
              {t:"SCAP",c:"Security Content Automation Protocol.\nâ€¢ Standardized approach to security management\nâ€¢ CVE: Common Vulnerabilities and Exposures\nâ€¢ CVSS: Vulnerability scoring\nâ€¢ CCE: Configuration enumeration"},
              {t:"Secure Coding Practices",c:"â€¢ Input validation\nâ€¢ Output encoding\nâ€¢ Parameterized queries\nâ€¢ Error handling without info disclosure\nâ€¢ Code review\nâ€¢ Static/Dynamic analysis (SAST/DAST)"},
              {t:"Data Loss Prevention (DLP)",c:"Monitoring and protecting data from unauthorized transfer.\nâ€¢ Network DLP: monitors traffic\nâ€¢ Endpoint DLP: monitors devices\nâ€¢ Cloud DLP: monitors cloud services\nâ€¢ Content inspection, context analysis"},
            ],
            "vulnmgmt": [
              {t:"Vulnerability Scanning",c:"Automated tools to find known vulnerabilities.\nâ€¢ Nessus, Qualys, OpenVAS\nâ€¢ Credentialed vs non-credentialed scans\nâ€¢ Network, web app, database scans\nâ€¢ Regular scheduling required"},
              {t:"Penetration Testing",c:"Simulated attack to find exploitable vulnerabilities.\nâ€¢ Black box: no prior knowledge\nâ€¢ White box: full knowledge\nâ€¢ Gray box: partial knowledge\nâ€¢ Rules of engagement required"},
              {t:"NIST Pen Test Methodology",c:"4 stages:\n1. Planning: scope, rules of engagement\n2. Discovery: reconnaissance, scanning\n3. Attack: exploitation, pivoting\n4. Reporting: findings, recommendations"},
              {t:"Vulnerability Assessment vs Pen Test",c:"Assessment: identifies vulnerabilities, no exploitation\nPen Test: identifies AND exploits vulnerabilities\nAssessment: broader scope, less risky\nPen Test: deeper, proves real impact"},
              {t:"CVSS Scoring",c:"Common Vulnerability Scoring System (0-10).\nNone: 0.0\nLow: 0.1-3.9\nMedium: 4.0-6.9\nHigh: 7.0-8.9\nCritical: 9.0-10.0\nFactors: attack vector, complexity, impact"},
              {t:"Patch Management Process",c:"1. Identify applicable patches\n2. Assess risk and priority\n3. Test in lab environment\n4. Deploy to production\n5. Verify and document\n6. Rollback plan if needed"},
              {t:"Bug Bounty Programs",c:"Rewards researchers for finding vulnerabilities.\nâ€¢ Responsible disclosure\nâ€¢ Defined scope and rules\nâ€¢ HackerOne, Bugcrowd platforms\nâ€¢ Cost-effective security testing"},
              {t:"Threat Intelligence",c:"Evidence-based knowledge about threats.\nâ€¢ OSINT: Open Source Intelligence\nâ€¢ Threat feeds and indicators\nâ€¢ STIX/TAXII: sharing formats\nâ€¢ Dark web monitoring"},
            ],
            "monitoring": [
              {t:"SIEM",c:"Security Information and Event Management.\nâ€¢ Collects and correlates logs from multiple sources\nâ€¢ Real-time alerting\nâ€¢ Dashboards and reporting\nâ€¢ Splunk, QRadar, Wazuh, Sentinel"},
              {t:"Log Management",c:"Collecting, storing, and analyzing log data.\nâ€¢ Syslog protocol\nâ€¢ Windows Event Logs\nâ€¢ Application logs\nâ€¢ Centralized logging\nâ€¢ Retention policies"},
              {t:"SOAR",c:"Security Orchestration, Automation, and Response.\nâ€¢ Automates repetitive SOC tasks\nâ€¢ Playbooks for incident response\nâ€¢ Integrates with SIEM and other tools\nâ€¢ Reduces response time"},
              {t:"IDS/IPS Detection Methods",c:"Signature-based: matches known patterns\nAnomaly-based: detects deviations from baseline\nBehavior-based: watches for suspicious behavior\nHeuristic: uses algorithms and rules"},
              {t:"Network Monitoring",c:"â€¢ Packet capture (pcap)\nâ€¢ NetFlow/sFlow analysis\nâ€¢ SNMP monitoring\nâ€¢ Bandwidth monitoring\nâ€¢ Wireshark, tcpdump\nâ€¢ Baseline comparison"},
              {t:"Alerting Best Practices",c:"â€¢ Tune to reduce false positives\nâ€¢ Prioritize by severity\nâ€¢ Escalation procedures\nâ€¢ Alert fatigue prevention\nâ€¢ Regular rule review\nâ€¢ Correlation rules"},
              {t:"Threat Hunting",c:"Proactively searching for threats not caught by automated tools.\nâ€¢ Hypothesis-driven\nâ€¢ Uses IoCs and TTPs\nâ€¢ MITRE ATT&CK framework\nâ€¢ Requires skilled analysts"},
              {t:"File Integrity Monitoring",c:"Detecting changes to critical system files.\nâ€¢ Tripwire, OSSEC\nâ€¢ Baseline comparison\nâ€¢ Alerts on unauthorized changes\nâ€¢ Compliance requirement (PCI DSS)"},
            ],
            "email": [
              {t:"Email Security Protocols",c:"SPF: Sender Policy Framework â€” authorized senders\nDKIM: DomainKeys â€” digital signature on emails\nDMARC: combines SPF + DKIM, sets policy\nPrevents email spoofing and phishing"},
              {t:"Email Gateway Security",c:"Filters email before reaching users.\nâ€¢ Spam filtering\nâ€¢ Malware scanning\nâ€¢ URL rewriting/sandboxing\nâ€¢ Attachment filtering\nâ€¢ Data Loss Prevention"},
              {t:"S/MIME",c:"Secure/Multipurpose Internet Mail Extensions.\nâ€¢ Email encryption and digital signatures\nâ€¢ Uses PKI certificates\nâ€¢ End-to-end encryption\nâ€¢ Provides confidentiality, integrity, authentication"},
              {t:"Endpoint Detection & Response",c:"EDR monitors endpoints for threats.\nâ€¢ Continuous monitoring\nâ€¢ Behavioral analysis\nâ€¢ Automated response\nâ€¢ Forensic data collection\nâ€¢ CrowdStrike, Carbon Black, SentinelOne"},
              {t:"Antivirus/Antimalware",c:"Signature-based: known malware patterns\nHeuristic: suspicious behavior patterns\nSandboxing: running in isolated environment\nCloud-based: real-time threat intelligence\nRegular updates essential"},
            ],
            "iam": [
              {t:"IAM Concepts",c:"Identity: who you are\nAuthentication: proving identity\nAuthorization: what you can access\nAccounting: tracking actions\nProvisioning & deprovisioning lifecycle"},
              {t:"SSO (Single Sign-On)",c:"One authentication grants access to multiple systems.\nâ€¢ Reduces password fatigue\nâ€¢ Centralized access management\nâ€¢ Risk: single point of failure\nâ€¢ SAML, OAuth, OIDC protocols"},
              {t:"SAML",c:"Security Assertion Markup Language.\nâ€¢ XML-based authentication standard\nâ€¢ Identity Provider (IdP) authenticates\nâ€¢ Service Provider (SP) grants access\nâ€¢ Enterprise SSO standard"},
              {t:"OAuth & OIDC",c:"OAuth 2.0: authorization framework (access tokens)\nOpenID Connect: authentication layer on OAuth\nâ€¢ Used for web/mobile app login\nâ€¢ 'Login with Google/Facebook'\nâ€¢ Tokens instead of passwords"},
              {t:"LDAP",c:"Lightweight Directory Access Protocol.\nâ€¢ Queries directory services\nâ€¢ Active Directory uses LDAP\nâ€¢ Centralized user management\nâ€¢ LDAPS for encrypted connection"},
              {t:"RADIUS & TACACS+",c:"RADIUS: Remote Authentication Dial-In User Service\nâ€¢ Combines auth + accounting\nâ€¢ UDP-based\nTACACS+: Terminal Access Controller\nâ€¢ Separates auth, authz, accounting\nâ€¢ TCP-based, fully encrypted\nâ€¢ Cisco proprietary"},
              {t:"Access Control Models",c:"DAC: Discretionary â€” owner controls access\nMAC: Mandatory â€” labels/clearances\nRBAC: Role-Based â€” access by job role\nABAC: Attribute-Based â€” policies using attributes\nRule-Based: predefined rules"},
              {t:"Privileged Access Management",c:"Controlling elevated access accounts.\nâ€¢ Just-in-time access\nâ€¢ Password vaulting\nâ€¢ Session recording\nâ€¢ Privileged account monitoring\nâ€¢ CyberArk, BeyondTrust"},
              {t:"Federation",c:"Linking identity systems across organizations.\nâ€¢ Trust relationships\nâ€¢ Users authenticated by home organization\nâ€¢ Cross-domain SSO\nâ€¢ SAML, WS-Federation"},
              {t:"MFA Methods",c:"â€¢ Push notification (Duo, Authenticator)\nâ€¢ TOTP: Time-based One-Time Password\nâ€¢ HOTP: HMAC-based OTP\nâ€¢ Hardware tokens (YubiKey)\nâ€¢ SMS (less secure)\nâ€¢ Biometrics"},
            ],
            "automation": [
              {t:"Automation in Security",c:"Automating repetitive security tasks.\nâ€¢ Faster response times\nâ€¢ Reduced human error\nâ€¢ Consistent execution\nâ€¢ Scalable operations\nâ€¢ Scripts, playbooks, workflows"},
              {t:"SOAR Platforms",c:"Security Orchestration, Automation, and Response.\nâ€¢ Automate incident response\nâ€¢ Playbooks for common scenarios\nâ€¢ Integrate multiple security tools\nâ€¢ Metrics and reporting\nâ€¢ Splunk SOAR, Palo Alto XSOAR"},
              {t:"Infrastructure as Code",c:"Managing infrastructure through code.\nâ€¢ Terraform, Ansible, Puppet, Chef\nâ€¢ Version controlled\nâ€¢ Repeatable deployments\nâ€¢ Security scanning of templates\nâ€¢ Drift detection"},
              {t:"CI/CD Pipeline Security",c:"Continuous Integration/Continuous Deployment.\nâ€¢ SAST: Static Application Security Testing\nâ€¢ DAST: Dynamic testing\nâ€¢ SCA: Software Composition Analysis\nâ€¢ Container scanning\nâ€¢ Secrets management"},
              {t:"Scripting for Security",c:"â€¢ Python: automation, API integration\nâ€¢ PowerShell: Windows administration\nâ€¢ Bash: Linux automation\nâ€¢ Use cases: log parsing, IoC enrichment, automated scans"},
              {t:"API Security",c:"Protecting application programming interfaces.\nâ€¢ Authentication (API keys, OAuth)\nâ€¢ Rate limiting\nâ€¢ Input validation\nâ€¢ HTTPS/TLS\nâ€¢ API gateway"},
            ],
            "incident": [
              {t:"IR Process (NIST)",c:"1. Preparation: tools, team, plans\n2. Detection & Analysis: identify incident\n3. Containment: limit damage\n4. Eradication: remove threat\n5. Recovery: restore operations\n6. Post-Incident/Lessons Learned"},
              {t:"Containment Strategies",c:"Short-term: isolate affected systems immediately\nLong-term: apply patches, change credentials\nâ€¢ Network isolation\nâ€¢ Disabling accounts\nâ€¢ Blocking IPs/domains\nâ€¢ Evidence preservation"},
              {t:"Evidence Handling",c:"Chain of custody: documented transfer of evidence\nâ€¢ Order of volatility: collect most volatile first\nâ€¢ Memory â†’ Cache â†’ Disk â†’ Logs â†’ Network\nâ€¢ Forensic imaging\nâ€¢ Write blockers"},
              {t:"Incident Classification",c:"â€¢ Severity levels (Critical, High, Medium, Low)\nâ€¢ Types: malware, unauthorized access, DoS, data breach\nâ€¢ Escalation procedures\nâ€¢ Communication plans\nâ€¢ Legal/regulatory notification"},
              {t:"Digital Forensics",c:"â€¢ Acquisition: forensic imaging of evidence\nâ€¢ Analysis: examining evidence\nâ€¢ Reporting: documenting findings\nâ€¢ Legal hold: preserving relevant data\nâ€¢ Tools: FTK, EnCase, Autopsy"},
              {t:"Post-Incident Activities",c:"â€¢ Lessons learned meetings\nâ€¢ Update IR plan\nâ€¢ Improve detection rules\nâ€¢ Root cause analysis\nâ€¢ Documentation for legal/compliance\nâ€¢ Metrics and KPIs"},
              {t:"CSIRT",c:"Computer Security Incident Response Team.\nâ€¢ Coordinates incident response\nâ€¢ Internal and/or external team\nâ€¢ Defined roles and responsibilities\nâ€¢ Regular training and exercises\nâ€¢ Tabletop exercises"},
              {t:"Order of Volatility",c:"Collect evidence from most to least volatile:\n1. CPU registers/cache\n2. RAM\n3. Swap/temp files\n4. Hard drive\n5. Remote logs\n6. Physical configuration\n7. Archival media"},
            ],
            "governance": [
              {t:"Security Frameworks",c:"NIST CSF: Identify, Protect, Detect, Respond, Recover\nISO 27001: ISMS standard\nCIS Controls: prioritized security actions\nCOBIT: IT governance framework\nMITRE ATT&CK: adversary tactics and techniques"},
              {t:"Risk Management",c:"Risk = Threat Ã— Vulnerability Ã— Impact\nâ€¢ Risk Avoidance: eliminate the risk\nâ€¢ Risk Mitigation: reduce the risk\nâ€¢ Risk Transfer: insurance, contracts\nâ€¢ Risk Acceptance: acknowledge and monitor"},
              {t:"Risk Assessment",c:"Quantitative: numerical values (ALE = SLE Ã— ARO)\nQualitative: subjective ratings (High/Medium/Low)\nâ€¢ Asset valuation\nâ€¢ Threat identification\nâ€¢ Vulnerability assessment\nâ€¢ Impact analysis"},
              {t:"Compliance",c:"Meeting regulatory and legal requirements.\nâ€¢ PCI DSS: payment card data\nâ€¢ HIPAA: healthcare data\nâ€¢ GDPR: EU personal data\nâ€¢ SOX: financial reporting\nâ€¢ FERPA: education records"},
              {t:"Security Policies",c:"â€¢ AUP: Acceptable Use Policy\nâ€¢ Password Policy\nâ€¢ Data Classification Policy\nâ€¢ Incident Response Policy\nâ€¢ Remote Access Policy\nâ€¢ BYOD Policy\nâ€¢ Clean Desk Policy"},
              {t:"Business Impact Analysis",c:"Identifies critical business functions and impact of disruption.\nâ€¢ RTO: Recovery Time Objective\nâ€¢ RPO: Recovery Point Objective\nâ€¢ MTTR: Mean Time to Repair\nâ€¢ MTBF: Mean Time Between Failures"},
              {t:"Third-Party Risk",c:"Risks from vendors, suppliers, partners.\nâ€¢ Vendor assessment questionnaires\nâ€¢ SOC 2 reports\nâ€¢ Right to audit clauses\nâ€¢ Supply chain risk management\nâ€¢ SLA requirements"},
              {t:"Governance Concepts",c:"â€¢ Policies: high-level intent\nâ€¢ Standards: mandatory requirements\nâ€¢ Guidelines: recommended practices\nâ€¢ Procedures: step-by-step instructions\nâ€¢ Baselines: minimum security levels"},
              {t:"Data Privacy",c:"â€¢ PII: Personally Identifiable Information\nâ€¢ PHI: Protected Health Information\nâ€¢ Data minimization\nâ€¢ Purpose limitation\nâ€¢ Right to be forgotten (GDPR)\nâ€¢ Privacy impact assessments"},
              {t:"Audit Types",c:"Internal: conducted by organization\nExternal: conducted by third party\nRegulatory: required by law\nâ€¢ Compliance audits\nâ€¢ Operational audits\nâ€¢ Financial audits"},
            ],
            "physical": [
              {t:"Physical Security Controls",c:"â€¢ Fences, gates, bollards\nâ€¢ Security guards\nâ€¢ CCTV cameras\nâ€¢ Lighting\nâ€¢ Mantraps/vestibules\nâ€¢ Locks (biometric, cipher, electronic)"},
              {t:"Access Control Vestibule",c:"Also called mantrap. Small room with two doors.\nâ€¢ Only one door opens at a time\nâ€¢ Prevents tailgating\nâ€¢ Can include authentication\nâ€¢ Common in data centers"},
              {t:"Environmental Controls",c:"â€¢ HVAC: heating, ventilation, cooling\nâ€¢ Fire suppression: wet pipe, dry pipe, gas\nâ€¢ Humidity controls\nâ€¢ UPS: Uninterruptible Power Supply\nâ€¢ Generator backup\nâ€¢ Hot/cold aisle containment"},
              {t:"Fire Suppression",c:"Wet pipe: water always in pipes (most common)\nDry pipe: water held back until activated\nPre-action: combination of dry + detection\nGas-based: FM-200, CO2 (for electronics)\nClass C fires for electrical equipment"},
              {t:"Surveillance",c:"â€¢ CCTV cameras (PTZ: pan-tilt-zoom)\nâ€¢ Motion detection\nâ€¢ Guards and patrols\nâ€¢ Access logs\nâ€¢ Visitor management\nâ€¢ Drone surveillance"},
              {t:"Secure Areas",c:"â€¢ Server rooms: restricted access\nâ€¢ Data centers: multiple security layers\nâ€¢ Faraday cages: block EM signals\nâ€¢ SCIF: Sensitive Compartmented Info Facility\nâ€¢ Air-gapped networks"},
            ],
            "resilience": [
              {t:"High Availability",c:"Systems designed to minimize downtime.\nâ€¢ 99.999% uptime (five nines) = ~5 min/year\nâ€¢ Redundant components\nâ€¢ Load balancing\nâ€¢ Failover clustering\nâ€¢ Geographic redundancy"},
              {t:"Backup Types",c:"Full: complete copy of all data\nIncremental: only changes since last backup\nDifferential: changes since last full backup\nSnapshot: point-in-time copy\n3-2-1 Rule: 3 copies, 2 media types, 1 offsite"},
              {t:"Disaster Recovery",c:"Restoring IT operations after major disruption.\nâ€¢ Hot site: fully operational duplicate\nâ€¢ Warm site: partially equipped\nâ€¢ Cold site: empty facility\nâ€¢ Cloud-based DR\nâ€¢ Regular DR testing"},
              {t:"Load Balancing",c:"Distributing traffic across multiple servers.\nâ€¢ Round-robin\nâ€¢ Least connections\nâ€¢ Weighted distribution\nâ€¢ Health checks\nâ€¢ Increases availability and performance"},
              {t:"RAID",c:"Redundant Array of Independent Disks.\nRAID 0: striping (performance, no redundancy)\nRAID 1: mirroring (redundancy)\nRAID 5: striping with parity (min 3 disks)\nRAID 6: double parity\nRAID 10: mirror + stripe"},
              {t:"Recovery Metrics",c:"RTO: Recovery Time Objective â€” max acceptable downtime\nRPO: Recovery Point Objective â€” max data loss acceptable\nMTTR: Mean Time to Repair\nMTBF: Mean Time Between Failures"},
              {t:"Redundancy Types",c:"â€¢ Server redundancy: clustering\nâ€¢ Network redundancy: multiple paths\nâ€¢ Power redundancy: UPS, generators\nâ€¢ Data redundancy: replication, RAID\nâ€¢ Geographic redundancy: multiple sites\nâ€¢ N+1, 2N configurations"},
            ],
          };
          return cards;
        };

        setCardData(generateCards());
        setLoading(false);
      }, []);

      // Progress tracking
      const getProgress = useCallback((sectionId) => {
        return progress[sectionId] || { studied: 0, mastered: 0 };
      }, [progress]);

      const markStudied = useCallback((sectionId, cardIndex) => {
        setProgress(prev => {
          const section = prev[sectionId] || { studied: 0, mastered: 0, cards: {} };
          const cards = { ...section.cards, [cardIndex]: true };
          return { ...prev, [sectionId]: { ...section, studied: Object.keys(cards).length, cards } };
        });
      }, []);

      const markMastered = useCallback((sectionId, cardIndex) => {
        const key = `${sectionId}-${cardIndex}`;
        setMastered(prev => {
          const updated = { ...prev, [key]: true };

          const sectionCards = cardData?.[sectionId] || [];
          const allMastered = sectionCards.every((_, idx) => updated[`${sectionId}-${idx}`]);

          if (allMastered && !sectionsCompletedToday.has(sectionId)) {
            const today = getToday();
            const newSections = new Set(sectionsCompletedToday);
            newSections.add(sectionId);
            setSectionsCompletedToday(newSections);

            if (!todayCompleted) {
              const newStreak = (lastStudyDate === getYesterday() || lastStudyDate === today)
                ? dailyStreak + 1
                : 1;
              setDailyStreak(newStreak);
              playSfx("streak");
              setLastStudyDate(today);
              setTodayCompleted(true);
              setShowStreakPopup(true);
              setTimeout(() => setShowStreakPopup(false), 3000);
              saveStreak(newStreak, today, newSections);
            } else {
              saveStreak(dailyStreak, today, newSections);
            }

            setShowCelebration(true);
            setTimeout(() => setShowCelebration(false), 2500);
          }

          return updated;
        });
        markStudied(sectionId, cardIndex);
      }, [markStudied, cardData, sectionsCompletedToday, todayCompleted, lastStudyDate, dailyStreak, saveStreak, playSfx]);

      const totalCards = cardData ? Object.values(cardData).reduce((sum, cards) => sum + cards.length, 0) : 0;
      const totalMastered = Object.keys(mastered).length;

      // Group sections by domain
      const domains = {};
      SECTIONS_META.forEach(s => {
        if (!domains[s.domain]) domains[s.domain] = [];
        domains[s.domain].push(s);
      });

      const filteredSections = searchQuery
        ? SECTIONS_META.filter(s =>
            s.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
            s.domain.toLowerCase().includes(searchQuery.toLowerCase())
          )
        : selectedDomain
        ? SECTIONS_META.filter(s => s.domain === selectedDomain)
        : SECTIONS_META;

      // Keep a ref in sync for the keyboard handler (avoids stale closure)
      useEffect(() => {
        studyStateRef.current = { flipped, currentCard, cardOrder, selectedSection, view };
      }, [flipped, currentCard, cardOrder, selectedSection, view]);

      // Keyboard shortcuts â€” Space: flip, G/Enter: got it, S: skip, â† â†’: navigate
      useEffect(() => {
        if (view !== "study") return;
        const handler = (e) => {
          const s = studyStateRef.current;
          if (s.view !== "study" || !s.selectedSection) return;
          const origIdx = s.cardOrder[s.currentCard] ?? s.currentCard;

          if (e.code === "Space" || e.code === "ArrowUp") {
            e.preventDefault();
            if (!s.flipped) markStudied(s.selectedSection.id, origIdx);
            playSfx("flip");
            setFlipped(f => !f);
          } else if (e.code === "ArrowRight") {
            if (s.currentCard < s.cardOrder.length - 1) {
              playSfx("nav");
              setCurrentCard(c => c + 1);
              setFlipped(false);
            }
          } else if (e.code === "ArrowLeft") {
            if (s.currentCard > 0) {
              playSfx("nav");
              setCurrentCard(c => c - 1);
              setFlipped(false);
            }
          } else if ((e.code === "KeyG" || e.code === "Enter") && s.flipped) {
            e.preventDefault();
            playSfx("gotIt");
            markMastered(s.selectedSection.id, origIdx);
            setFlipped(false);
            if (s.currentCard < s.cardOrder.length - 1) {
              playSfx("nav");
              setCurrentCard(c => c + 1);
            }
          } else if (e.code === "KeyS" && s.flipped) {
            setFlipped(false);
            if (s.currentCard < s.cardOrder.length - 1) {
              playSfx("nav");
              setCurrentCard(c => c + 1);
            }
          }
        };
        window.addEventListener("keydown", handler);
        return () => window.removeEventListener("keydown", handler);
      }, [view, markStudied, markMastered, playSfx]);

      /* â”€â”€â”€â”€ Study View â”€â”€â”€â”€ */
      if (view === "study" && selectedSection && cardData) {
        const cards = cardData[selectedSection.id] || [];
        const displayOrder = cardOrder.length > 0 ? cardOrder : cards.map((_, i) => i);
        const originalIdx = displayOrder[currentCard] ?? currentCard;
        const card = cards[originalIdx];
        const sectionMeta = SECTIONS_META.find(s => s.id === selectedSection.id);
        const isMastered = mastered[`${selectedSection.id}-${originalIdx}`];
        const progressPct = displayOrder.length > 0 ? ((currentCard + 1) / displayOrder.length) * 100 : 0;

        return (
          <div style={{
            minHeight: "100vh",
            background: "#131F24",
            fontFamily: "'Nunito', 'SF Pro Rounded', -apple-system, sans-serif",
            color: "#fff",
            maxWidth: 480,
            margin: "0 auto",
            position: "relative",
            overflow: "hidden",
          }}>
            {/* Celebration overlay â€” deck complete */}
            {showCelebration && (
              <div style={{
                position: "fixed", inset: 0, display: "flex", alignItems: "center", justifyContent: "center",
                background: "rgba(0,0,0,0.7)", zIndex: 999, animation: "fadeIn 0.3s ease",
              }}>
                <div style={{
                  textAlign: "center", animation: "bounceIn 0.5s ease",
                  background: "#1C2F36", borderRadius: 24, padding: "32px 40px",
                  boxShadow: "0 20px 60px rgba(0,0,0,0.5)",
                }}>
                  <div style={{ fontSize: 64, marginBottom: 12 }}>ðŸŽ‰</div>
                  <div style={{ fontSize: 22, fontWeight: 900, color: "#fff", marginBottom: 4 }}>
                    Deck Complete!
                  </div>
                  <div style={{ fontSize: 14, color: "#89A3AD", fontWeight: 700 }}>
                    You mastered every card in this section
                  </div>
                </div>
              </div>
            )}

            {/* Daily streak popup */}
            {showStreakPopup && (
              <div style={{
                position: "fixed", top: 20, left: "50%", transform: "translateX(-50%)",
                zIndex: 1000, animation: "slideDown 0.4s ease",
              }}>
                <div style={{
                  background: "linear-gradient(135deg, #FFC800, #FF9600)", borderRadius: 16,
                  padding: "14px 28px", display: "flex", alignItems: "center", gap: 12,
                  boxShadow: "0 8px 30px rgba(255,200,0,0.3)",
                }}>
                  <span style={{ fontSize: 32 }}>ðŸ”¥</span>
                  <div>
                    <div style={{ fontSize: 20, fontWeight: 900, color: "#fff" }}>
                      {dailyStreak} Day Streak!
                    </div>
                    <div style={{ fontSize: 12, fontWeight: 700, color: "rgba(255,255,255,0.8)" }}>
                      {dailyStreak === 1 ? "You started a streak! Come back tomorrow!" : "Keep it going! Study again tomorrow!"}
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* Header */}
            <div style={{
              display: "flex", alignItems: "center", padding: "16px 20px",
              borderBottom: "2px solid #1C2F36",
            }}>
              <button onClick={() => { setView("home"); setCurrentCard(0); setFlipped(false); }} style={{
                background: "none", border: "none", color: "#89A3AD", fontSize: 28, cursor: "pointer", padding: 4,
              }}>â†</button>
              <div style={{ flex: 1, margin: "0 16px" }}>
                <div style={{
                  height: 16, background: "#1C2F36", borderRadius: 8, overflow: "hidden",
                }}>
                  <div style={{
                    height: "100%", width: `${progressPct}%`, background: sectionMeta?.color || "#58CC02",
                    borderRadius: 8, transition: "width 0.5s ease",
                  }} />
                </div>
              </div>
              <span style={{ color: "#89A3AD", fontSize: 14, fontWeight: 700 }}>
                {currentCard + 1}/{displayOrder.length}
              </span>
            </div>

            {/* Study mode toggles */}
            <div style={{ display: "flex", gap: 8, padding: "6px 16px", justifyContent: "flex-end" }}>
              <button
                onClick={() => {
                  const next = !shuffled;
                  setShuffled(next);
                  const order = buildCardOrder(selectedSection.id, cards, next, unmasteredOnly, mastered);
                  playSfx("nav");
                  setCardOrder(order);
                  setCurrentCard(0);
                  setFlipped(false);
                }}
                style={{
                  padding: "4px 10px", borderRadius: 10, fontSize: 11, fontWeight: 800,
                  border: `2px solid ${shuffled ? "#FFC800" : "#1C2F36"}`,
                  background: shuffled ? "rgba(255,200,0,0.15)" : "#1C2F36",
                  color: shuffled ? "#FFC800" : "#89A3AD", cursor: "pointer",
                }}
              >ðŸ”€ Shuffle</button>
              <button
                onClick={() => {
                  const next = !unmasteredOnly;
                  setUnmasteredOnly(next);
                  const order = buildCardOrder(selectedSection.id, cards, shuffled, next, mastered);
                  playSfx("nav");
                  setCardOrder(order);
                  setCurrentCard(0);
                  setFlipped(false);
                }}
                style={{
                  padding: "4px 10px", borderRadius: 10, fontSize: 11, fontWeight: 800,
                  border: `2px solid ${unmasteredOnly ? "#1CB0F6" : "#1C2F36"}`,
                  background: unmasteredOnly ? "rgba(28,176,246,0.15)" : "#1C2F36",
                  color: unmasteredOnly ? "#1CB0F6" : "#89A3AD", cursor: "pointer",
                }}
              >â­ Unmastered</button>
            </div>

            {/* Daily streak indicator */}
            {dailyStreak > 0 && (
              <div style={{
                display: "flex", alignItems: "center", justifyContent: "center", gap: 6,
                padding: "8px 0", color: "#FFC800", fontWeight: 800, fontSize: 14,
              }}>
                ðŸ”¥ {dailyStreak} day{dailyStreak !== 1 ? "s" : ""} {todayCompleted ? "âœ“" : "â€¢ Complete a deck today!"}
              </div>
            )}
            {dailyStreak === 0 && (
              <div style={{
                display: "flex", alignItems: "center", justifyContent: "center", gap: 6,
                padding: "8px 0", color: "#89A3AD", fontWeight: 700, fontSize: 13,
              }}>
                Complete all cards in a deck to start your streak!
              </div>
            )}

            {/* Card */}
            <div style={{ padding: "20px 20px 100px" }}>
              <div
                onClick={() => {
                  playSfx("flip");
                  setFlipped(!flipped);
                  if (!flipped) markStudied(selectedSection.id, originalIdx);
                }}
                style={{
                  background: flipped ? "#1C2F36" : (sectionMeta?.color || "#58CC02"),
                  borderRadius: 20,
                  padding: 28,
                  minHeight: 380,
                  cursor: "pointer",
                  display: "flex",
                  flexDirection: "column",
                  justifyContent: flipped ? "flex-start" : "center",
                  alignItems: flipped ? "flex-start" : "center",
                  boxShadow: flipped
                    ? "0 4px 20px rgba(0,0,0,0.3)"
                    : `0 8px 0 ${sectionMeta?.color || "#58CC02"}88, 0 12px 30px rgba(0,0,0,0.3)`,
                  transform: flipped ? "none" : "translateY(-2px)",
                  transition: "all 0.3s ease",
                  position: "relative",
                  overflow: "hidden",
                }}
              >
                {!flipped ? (
                  <>
                    <div style={{ fontSize: 48, marginBottom: 16 }}>{sectionMeta?.icon}</div>
                    <div style={{
                      fontSize: 26, fontWeight: 800, textAlign: "center",
                      color: "#fff", textShadow: "0 2px 4px rgba(0,0,0,0.2)",
                      lineHeight: 1.3,
                    }}>
                      {card?.t}
                    </div>
                    <div style={{
                      marginTop: 20, fontSize: 13, color: "rgba(255,255,255,0.7)",
                      fontWeight: 700, textTransform: "uppercase", letterSpacing: 1,
                    }}>
                      Tap to reveal
                    </div>
                  </>
                ) : (
                  <>
                    <div style={{
                      fontSize: 16, fontWeight: 800, color: sectionMeta?.color || "#58CC02",
                      marginBottom: 12, textTransform: "uppercase", letterSpacing: 0.5,
                    }}>
                      {card?.t}
                    </div>
                    <div style={{
                      fontSize: 15, lineHeight: 1.7, color: "#CDE0E8",
                      whiteSpace: "pre-line", fontWeight: 600,
                    }}>
                      {card?.c}
                    </div>
                    {isMastered && (
                      <div style={{
                        position: "absolute", top: 16, right: 16,
                        background: "#58CC02", borderRadius: 50,
                        width: 32, height: 32, display: "flex", alignItems: "center", justifyContent: "center",
                        fontSize: 16,
                      }}>âœ“</div>
                    )}
                  </>
                )}
              </div>

              {/* Action buttons */}
              {flipped && (
                <div style={{
                  display: "flex", gap: 12, marginTop: 20,
                  animation: "slideUp 0.3s ease",
                }}>
                  <button
                    onClick={(e) => {
                      e.stopPropagation();
                      playSfx("nav");
                      setFlipped(false);
                      if (currentCard < displayOrder.length - 1) setCurrentCard(currentCard + 1);
                    }}
                    style={{
                      flex: 1, padding: "16px 20px", borderRadius: 16,
                      border: "2px solid #FF4B4B", background: "transparent",
                      color: "#FF4B4B", fontSize: 16, fontWeight: 800,
                      cursor: "pointer", textTransform: "uppercase",
                    }}
                  >
                    Study Again
                  </button>
                  <button
                    onClick={(e) => {
                      e.stopPropagation();
                      playSfx("gotIt");
                      markMastered(selectedSection.id, originalIdx);
                      setFlipped(false);
                      if (currentCard < displayOrder.length - 1) {
                        playSfx("nav");
                        setCurrentCard(currentCard + 1);
                      }
                    }}
                    style={{
                      flex: 1, padding: "16px 20px", borderRadius: 16,
                      border: "none", background: "#58CC02",
                      color: "#fff", fontSize: 16, fontWeight: 800,
                      cursor: "pointer", textTransform: "uppercase",
                      boxShadow: "0 4px 0 #46A302",
                    }}
                  >
                    Got It! âœ“
                  </button>
                </div>
              )}

              {/* Keyboard hint */}
              <div style={{ textAlign: "center", fontSize: 11, color: "#3A4F58", fontWeight: 700, marginTop: 12 }}>
                Space: flip Â· G: got it Â· S: skip Â· â† â†’: navigate
              </div>

              {/* Navigation arrows */}
              {!flipped && (
                <div style={{ display: "flex", justifyContent: "space-between", marginTop: 20 }}>
                  <button
                    disabled={currentCard === 0}
                    onClick={() => { playSfx("nav"); setCurrentCard(currentCard - 1); setFlipped(false); }}
                    style={{
                      padding: "14px 28px", borderRadius: 16, border: "2px solid #1C2F36",
                      background: "#1C2F36", color: currentCard === 0 ? "#3A4F58" : "#89A3AD",
                      fontSize: 16, fontWeight: 800, cursor: currentCard === 0 ? "default" : "pointer",
                    }}
                  >
                    â† Prev
                  </button>
                  <button
                    disabled={currentCard === displayOrder.length - 1}
                    onClick={() => { playSfx("nav"); setCurrentCard(currentCard + 1); setFlipped(false); }}
                    style={{
                      padding: "14px 28px", borderRadius: 16, border: "2px solid #1C2F36",
                      background: "#1C2F36", color: currentCard === displayOrder.length - 1 ? "#3A4F58" : "#89A3AD",
                      fontSize: 16, fontWeight: 800, cursor: currentCard === displayOrder.length - 1 ? "default" : "pointer",
                    }}
                  >
                    Next â†’
                  </button>
                </div>
              )}
            </div>

            <style>{`
              @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@600;700;800;900&display=swap');
              @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
              @keyframes bounceIn { 0% { transform: scale(0.3); opacity: 0 } 50% { transform: scale(1.1) } 100% { transform: scale(1); opacity: 1 } }
              @keyframes slideUp { from { transform: translateY(20px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
              @keyframes slideDown { from { transform: translateX(-50%) translateY(-40px); opacity: 0 } to { transform: translateX(-50%) translateY(0); opacity: 1 } }
            `}</style>
          </div>
        );
      }

      /* â”€â”€â”€â”€ Home View â”€â”€â”€â”€ */
      return (
        <div style={{
          minHeight: "100vh",
          background: "#131F24",
          fontFamily: "'Nunito', 'SF Pro Rounded', -apple-system, sans-serif",
          color: "#fff",
          maxWidth: 480,
          margin: "0 auto",
        }}>
          {/* Top bar */}
          <div style={{
            padding: "20px 20px 0",
            display: "flex", alignItems: "center", justifyContent: "space-between",
          }}>
            <div>
              <div style={{ fontSize: 26, fontWeight: 900, letterSpacing: -0.5 }}>
                ðŸ” Sec+ Cards
              </div>
              <div style={{ color: "#89A3AD", fontSize: 13, fontWeight: 700, marginTop: 2 }}>
                SY0-701 Study Deck
              </div>
            </div>
            <div style={{
              display: "flex", alignItems: "center", gap: 8,
              background: dailyStreak > 0 ? "linear-gradient(135deg, #3A2800, #2A1F00)" : "#1C2F36",
              border: dailyStreak > 0 ? "2px solid #FFC80044" : "2px solid transparent",
              borderRadius: 14, padding: "10px 16px",
            }}>
              <span style={{ fontSize: 22 }}>{dailyStreak > 0 ? "ðŸ”¥" : "â„ï¸"}</span>
              <div>
                <div style={{ fontWeight: 900, color: dailyStreak > 0 ? "#FFC800" : "#89A3AD", fontSize: 18, lineHeight: 1 }}>
                  {dailyStreak}
                </div>
                <div style={{ color: "#89A3AD", fontSize: 10, fontWeight: 700, lineHeight: 1, marginTop: 2 }}>
                  {dailyStreak === 1 ? "day" : "days"}
                </div>
              </div>
            </div>
          </div>

          {/* Sound toggle */}
          <div style={{ padding: "10px 20px 0" }}>
            <button
              onClick={() => setSoundEnabled(v => !v)}
              style={{
                width: "100%",
                padding: "10px 14px",
                borderRadius: 12,
                border: "2px solid #1C2F36",
                background: "#1C2F36",
                color: soundEnabled ? "#58CC02" : "#89A3AD",
                fontSize: 13,
                fontWeight: 800,
                cursor: "pointer",
              }}
            >
              {soundEnabled ? "ðŸ”Š Sound: On" : "ðŸ”‡ Sound: Off"}  (tap once anywhere if iOS blocks audio)
            </button>
          </div>

          {/* Daily streak banner */}
          {!todayCompleted && (
            <div style={{
              margin: "12px 20px 0", padding: "12px 16px", borderRadius: 12,
              background: dailyStreak > 0 ? "linear-gradient(135deg, #3A2800, #2A1F00)" : "#1C2F36",
              border: dailyStreak > 0 ? "1px solid #FFC80033" : "1px solid #2A3F48",
              display: "flex", alignItems: "center", gap: 10,
            }}>
              <span style={{ fontSize: 20 }}>{dailyStreak > 0 ? "âš¡" : "ðŸ‘‹"}</span>
              <div style={{ fontSize: 13, fontWeight: 700, color: dailyStreak > 0 ? "#FFC800" : "#89A3AD" }}>
                {dailyStreak > 0
                  ? `Complete a deck to keep your ${dailyStreak}-day streak alive!`
                  : "Complete all cards in any deck to start a streak!"
                }
              </div>
            </div>
          )}
          {todayCompleted && dailyStreak > 0 && (
            <div style={{
              margin: "12px 20px 0", padding: "12px 16px", borderRadius: 12,
              background: "rgba(88,204,2,0.1)", border: "1px solid rgba(88,204,2,0.2)",
              display: "flex", alignItems: "center", gap: 10,
            }}>
              <span style={{ fontSize: 20 }}>âœ…</span>
              <div style={{ fontSize: 13, fontWeight: 700, color: "#58CC02" }}>
                Today's streak secured! Come back tomorrow to keep it going.
              </div>
            </div>
          )}

          {/* Overall progress */}
          <div style={{ padding: "16px 20px" }}>
            <div style={{
              background: "#1C2F36", borderRadius: 16, padding: 16,
            }}>
              <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 8 }}>
                <span style={{ fontSize: 13, fontWeight: 700, color: "#89A3AD" }}>Overall Progress</span>
                <span style={{ fontSize: 13, fontWeight: 800, color: "#58CC02" }}>
                  {totalCards > 0 ? Math.round((totalMastered / totalCards) * 100) : 0}%
                </span>
              </div>
              <div style={{ height: 12, background: "#0D1B21", borderRadius: 6, overflow: "hidden" }}>
                <div style={{
                  height: "100%", width: `${totalCards > 0 ? (totalMastered / totalCards) * 100 : 0}%`,
                  background: "linear-gradient(90deg, #58CC02, #7AE528)",
                  borderRadius: 6, transition: "width 0.5s ease",
                }} />
              </div>
              <div style={{
                display: "flex", justifyContent: "space-between", marginTop: 10,
                fontSize: 12, color: "#89A3AD", fontWeight: 700,
              }}>
                <span>{totalMastered} of {totalCards} cards</span>
                <span>19 topics</span>
              </div>
            </div>
          </div>

          {/* Search */}
          <div style={{ padding: "0 20px 12px" }}>
            <input
              type="text"
              placeholder="ðŸ” Search topics..."
              value={searchQuery}
              onChange={(e) => { setSearchQuery(e.target.value); setSelectedDomain(null); }}
              style={{
                width: "100%", padding: "12px 16px", borderRadius: 12,
                border: "2px solid #1C2F36", background: "#1C2F36",
                color: "#fff", fontSize: 14, fontWeight: 700, outline: "none",
                boxSizing: "border-box",
              }}
            />
          </div>

          {/* Domain filters */}
          <div style={{
            display: "flex", gap: 8, padding: "0 20px 16px",
            overflowX: "auto", whiteSpace: "nowrap",
          }}>
            <button
              onClick={() => { setSelectedDomain(null); setSearchQuery(""); }}
              style={{
                padding: "8px 14px", borderRadius: 20,
                border: !selectedDomain ? "2px solid #58CC02" : "2px solid #1C2F36",
                background: !selectedDomain ? "rgba(88,204,2,0.15)" : "#1C2F36",
                color: !selectedDomain ? "#58CC02" : "#89A3AD",
                fontSize: 12, fontWeight: 800, cursor: "pointer", flexShrink: 0,
              }}
            >All</button>
            {Object.keys(domains).map(domain => (
              <button
                key={domain}
                onClick={() => { setSelectedDomain(domain === selectedDomain ? null : domain); setSearchQuery(""); }}
                style={{
                  padding: "8px 14px", borderRadius: 20,
                  border: `2px solid ${selectedDomain === domain ? DOMAIN_COLORS[domain] : "#1C2F36"}`,
                  background: selectedDomain === domain ? `${DOMAIN_COLORS[domain]}22` : "#1C2F36",
                  color: selectedDomain === domain ? DOMAIN_COLORS[domain] : "#89A3AD",
                  fontSize: 12, fontWeight: 800, cursor: "pointer", flexShrink: 0,
                }}
              >
                {domain.replace("Domain ", "D")}
              </button>
            ))}
          </div>

          {/* Section cards */}
          <div style={{ padding: "0 20px 40px" }}>
            {filteredSections.map((section, i) => {
              const sectionCards = cardData?.[section.id] || [];
              const masteredCount = sectionCards.filter((_, idx) => mastered[`${section.id}-${idx}`]).length;
              const pct = sectionCards.length > 0 ? Math.round((masteredCount / sectionCards.length) * 100) : 0;
              const isComplete = pct === 100;

              return (
                <div
                  key={section.id}
                  onClick={() => {
                    const sectionCards = cardData?.[section.id] || [];
                    const order = buildCardOrder(section.id, sectionCards, shuffled, unmasteredOnly, mastered);
                    playSfx("nav");
                    setCardOrder(order);
                    setSelectedSection(section);
                    setCurrentCard(0);
                    setFlipped(false);
                    setView("study");
                  }}
                  style={{
                    background: "#1C2F36",
                    borderRadius: 16,
                    padding: 18,
                    marginBottom: 12,
                    cursor: "pointer",
                    borderLeft: `4px solid ${section.color}`,
                    transition: "transform 0.15s ease, box-shadow 0.15s ease",
                    boxShadow: "0 2px 8px rgba(0,0,0,0.2)",
                    animation: `slideUp 0.3s ease ${i * 0.03}s both`,
                  }}
                  onMouseEnter={e => { e.currentTarget.style.transform = "translateY(-2px)"; e.currentTarget.style.boxShadow = "0 6px 20px rgba(0,0,0,0.3)"; }}
                  onMouseLeave={e => { e.currentTarget.style.transform = "none"; e.currentTarget.style.boxShadow = "0 2px 8px rgba(0,0,0,0.2)"; }}
                >
                  <div style={{ display: "flex", alignItems: "center", gap: 14 }}>
                    <div style={{
                      width: 50, height: 50, borderRadius: 14,
                      background: `${section.color}22`,
                      display: "flex", alignItems: "center", justifyContent: "center",
                      fontSize: 26, flexShrink: 0,
                      border: isComplete ? `2px solid ${section.color}` : "none",
                    }}>
                      {isComplete ? "âœ…" : section.icon}
                    </div>
                    <div style={{ flex: 1, minWidth: 0 }}>
                      <div style={{ fontSize: 15, fontWeight: 800, marginBottom: 2 }}>
                        {section.title}
                      </div>
                      <div style={{ fontSize: 11, color: section.color, fontWeight: 700, marginBottom: 6 }}>
                        {section.domain} Â· {sectionCards.length} cards
                      </div>
                      <div style={{ height: 6, background: "#0D1B21", borderRadius: 3, overflow: "hidden" }}>
                        <div style={{
                          height: "100%", width: `${pct}%`,
                          background: section.color, borderRadius: 3,
                          transition: "width 0.5s ease",
                        }} />
                      </div>
                    </div>
                    <div style={{
                      fontSize: 13, fontWeight: 800, color: pct > 0 ? section.color : "#3A4F58",
                      flexShrink: 0,
                    }}>
                      {pct}%
                    </div>
                  </div>
                </div>
              );
            })}
          </div>

          <style>{`
            @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@600;700;800;900&display=swap');
            @keyframes slideUp { from { transform: translateY(20px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
            * { -webkit-tap-highlight-color: transparent; }
            ::-webkit-scrollbar { display: none; }
          `}</style>
        </div>
      );
    }

    // Mount the app
    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(React.createElement(SecurityPlusApp));
  </script>

  <script>
    // Register service worker for offline support
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").then(
          (reg) => console.log("SW registered:", reg.scope),
          (err) => console.log("SW registration failed:", err)
        );
      });
    }
  </script>
</body>
</html>
